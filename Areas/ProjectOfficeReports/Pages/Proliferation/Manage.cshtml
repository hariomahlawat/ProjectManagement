@page
@model ProjectManagement.Areas.ProjectOfficeReports.Pages.Proliferation.ManageModel
@{
    ViewData["Title"] = "Proliferation Manager";
}

<div class="container-xxl my-4" data-page="proliferation-manage">
    <nav aria-label="Breadcrumb" class="visit-breadcrumb">
        <ol class="breadcrumb mb-0">
            <li class="breadcrumb-item"><a asp-area="" asp-page="/Dashboard/Index">Dashboard</a></li>
            <li class="breadcrumb-item"><a asp-area="ProjectOfficeReports" asp-page="/Proliferation/Index">Proliferation tracker</a></li>
            <li class="breadcrumb-item active" aria-current="page">Proliferation manager</li>
        </ol>
    </nav>

    <div class="pf-command-bar" data-command-bar>
        <div class="pf-command-bar__details">
            <div class="pf-command-bar__title-row">
                <h2 class="pf-command-bar__title mb-0">Proliferation Manager</h2>
                <span class="pf-command-bar__scope" data-command-scope>Granular entry</span>
            </div>
            <div class="pf-command-bar__meta">
                <span class="pf-command-bar__timestamp">Last updated:</span>
                <span class="pf-command-bar__timestamp-value" data-command-updated-value>â€”</span>
            </div>
        </div>
        <div class="pf-command-bar__actions">
            <button class="btn btn-primary" id="pf-save" type="submit" form="pf-form" disabled>Save</button>
            <button class="btn btn-outline-danger" id="pf-delete" type="button" disabled>Delete</button>
            <button class="btn btn-outline-secondary" id="pf-overrides-export" type="button" aria-disabled="true" disabled>Export CSV</button>
        </div>
    </div>

    <p class="text-muted mb-4">Review existing entries and add or edit yearly totals and granular records.</p>

    <div class="pf-manage-layout" id="pf-manage-layout">
        <section class="pf-manage-column pf-manage-column--list" id="pf-list-panel">
            <partial name="_ProliferationList" model="Model.ListBoot" />
        </section>
        <section class="pf-manage-column pf-manage-column--detail" id="pf-detail-panel">
            <partial name="_ProliferationEditor" model="Model.EditorBoot" />
        </section>
        <aside class="pf-manage-column pf-manage-column--rail" id="pf-rail-panel">
            <div class="pf-manage-rail">
                <partial name="_PreferenceOverrides" model="Model.OverridesBoot" />
            </div>
        </aside>
    </div>
</div>

<div class="modal fade" id="pf-delete-modal" tabindex="-1" aria-labelledby="pf-delete-modal-label" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header border-0 pb-0">
                <h5 class="modal-title" id="pf-delete-modal-label">Delete proliferation entry</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cancel deletion"></button>
            </div>
            <div class="modal-body">
                <p class="mb-2">Are you sure you want to delete the <span data-confirm-type>selected record</span> for <span data-confirm-project>this project</span>?</p>
                <p class="text-muted mb-0">This will remove data for <span data-confirm-date>the selected date</span>. This action cannot be undone.</p>
            </div>
            <div class="modal-footer border-0 pt-0">
                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal" data-confirm-cancel>Cancel</button>
                <button type="button" class="btn btn-danger" data-confirm-accept>Delete entry</button>
            </div>
        </div>
    </div>
</div>

<div class="toast-container position-fixed top-0 end-0 p-3" id="toastHost" aria-live="polite" aria-atomic="true"></div>

@section Styles {
    <link rel="stylesheet" href="~/css/proliferation.css" asp-append-version="true" />
}

@section Scripts {
    <script src="~/js/pages/proliferation-manage.js" asp-append-version="true" defer></script>
}
