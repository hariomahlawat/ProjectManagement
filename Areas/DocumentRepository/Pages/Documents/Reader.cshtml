@page "{id:guid}"
@model ProjectManagement.Areas.DocumentRepository.Pages.Documents.ReaderModel
@using ProjectManagement.Models
@{
    ViewData["Title"] = "Document reader";
}

<partial name="~/Views/Shared/_Breadcrumbs.cshtml" model='new BreadcrumbModel(
                                                       ("Documents", Url.Page("/Documents/Index", new { area = "DocumentRepository" })),
                                                       ("Reader", null)
                                                   )' />

<div class="container-fluid px-0">
    <div class="reader-toolbar border-bottom bg-white d-flex align-items-center gap-2 px-3 sticky-top">
        <div class="btn-group btn-group-sm" role="group" aria-label="Zoom">
            <a class="btn btn-outline-secondary" asp-page="./Reader" asp-route-id="@Model.Id" asp-route-zoom="page-fit">Fit</a>
            <a class="btn btn-outline-secondary" asp-page="./Reader" asp-route-id="@Model.Id" asp-route-zoom="page-width">Width</a>
            <a class="btn btn-outline-secondary" asp-page="./Reader" asp-route-id="@Model.Id" asp-route-zoom="125">125%</a>
            <a class="btn btn-outline-secondary" asp-page="./Reader" asp-route-id="@Model.Id" asp-route-zoom="150">150%</a>
        </div>

        <form method="get" class="d-flex align-items-center ms-2">
            <input type="hidden" name="id" value="@Model.Id" />
            <label for="pageNo" class="form-label me-1 mb-0 small text-muted">Page</label>
            <input id="pageNo" name="pageNo" type="number" min="1" class="form-control form-control-sm w-auto me-2" value="@(Model.PageNo ?? 1)" />
            <button class="btn btn-sm btn-primary" type="submit">Go</button>
        </form>

        <div class="ms-auto d-flex align-items-center gap-2">
            <a class="btn btn-sm btn-outline-primary" href="@Model.ViewUrl" target="_blank" rel="noopener">Open in new tab</a>
            <a class="btn btn-sm btn-primary" href="@Model.DownloadUrl">Download</a>
        </div>
    </div>

    <div class="reader-host bg-light">
        <iframe class="reader-frame" src="@Model.IframeSrc" title="PDF viewer" referrerpolicy="no-referrer" loading="lazy"></iframe>
    </div>
</div>

@section Styles {
    <link rel="stylesheet" href="~/css/docrepo-reader.css" asp-append-version="true" />
}
