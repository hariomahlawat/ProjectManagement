@page
@model ProjectManagement.Pages.Calendar.IndexModel
@attribute [Microsoft.AspNetCore.Authorization.Authorize]
@{
    ViewData["Title"] = "Calendar";
}

@section Styles {
  <link rel="stylesheet" href="~/lib/fullcalendar/daygrid/index.min.css" />
  <link rel="stylesheet" href="~/lib/fullcalendar/timegrid/index.min.css" />
  <link rel="stylesheet" href="~/lib/fullcalendar/list/index.min.css" />
  <style>
    /* fixed-height wrapper so the calendar doesn't grow infinitely */
    .fc-wrap-600 { position: relative; height: 600px; }
  </style>
}

<div class="card shadow-sm">
  <div class="card-header d-flex justify-content-between align-items-center">
    <div class="btn-group btn-group-sm" role="group" aria-label="Calendar views">
      <button class="btn btn-outline-secondary" data-cal-view="dayGridMonth">Month</button>
      <button class="btn btn-outline-secondary" data-cal-view="timeGridWeek">Week</button>
      <button class="btn btn-outline-secondary" data-cal-view="listMonth">List</button>
    </div>
    <div class="d-flex gap-2">
      <button class="btn btn-sm btn-outline-secondary" data-cal="today">Today</button>
      <div id="calTitle" class="fw-semibold"></div>
    </div>
    @if (User.IsInRole("Admin") || User.IsInRole("TA") || User.IsInRole("HOD")) {
      <button class="btn btn-sm btn-primary" id="btnNewEvent">New event</button>
    }
  </div>
  <div class="card-body">
    <div class="fc-wrap-600">
      <div id="orgCalendar"></div>
    </div>
  </div>
</div>

@section Scripts {
  <script src="~/lib/fullcalendar/core/index.global.min.js" asp-append-version="true"></script>
  <script src="~/lib/fullcalendar/daygrid/index.global.min.js" asp-append-version="true"></script>
  <script src="~/lib/fullcalendar/timegrid/index.global.min.js" asp-append-version="true"></script>
  <script src="~/lib/fullcalendar/list/index.global.min.js" asp-append-version="true"></script>
  <script src="~/lib/fullcalendar/interaction/index.global.min.js" asp-append-version="true"></script>
  <script type="module" src="~/js/calendar.js" asp-append-version="true"></script>
}
