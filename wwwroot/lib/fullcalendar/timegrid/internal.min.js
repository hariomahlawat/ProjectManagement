/**
 * Minified by jsDelivr using Terser v5.39.0.
 * Original file: /npm/@fullcalendar/timegrid@6.1.15/internal.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{Splitter,hasBgRendering,createFormatter,ViewContextType,ContentContainer,BaseComponent,DateComponent,diffDays,buildNavLinkAttrs,WeekNumberContainer,getStickyHeaderDates,ViewContainer,SimpleScrollGrid,getStickyFooterScrollbar,NowTimer,NowIndicatorContainer,renderScrollShim,rangeContainsMarker,startOfDay,asRoughMs,createDuration,RefMap,PositionCache,MoreLinkContainer,SegHierarchy,groupIntersectingEntries,binarySearch,getEntrySpanEnd,buildEntryKey,StandardEvent,memoize,sortEventSegs,DayCellContainer,hasCustomDayCellContent,getSegMeta,buildIsoString,computeEarliestSegStart,buildEventRangeKey,BgEvent,renderFill,addDurations,multiplyDuration,wholeDivideDurations,Slicer,intersectRanges,formatIsoTimeString,DayHeader,DaySeriesModel,DayTableModel,injectStyles}from"@fullcalendar/core/internal.js";import{createElement,createRef,Fragment}from"@fullcalendar/core/preact.js";import{DayTable}from"@fullcalendar/daygrid/internal.js";class AllDaySplitter extends Splitter{getKeyInfo(){return{allDay:{},timed:{}}}getKeysForDateSpan(e){return e.allDay?["allDay"]:["timed"]}getKeysForEventDef(e){return e.allDay?hasBgRendering(e)?["timed","allDay"]:["allDay"]:["timed"]}}const DEFAULT_SLAT_LABEL_FORMAT=createFormatter({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"short"});function TimeColsAxisCell(e){let t=["fc-timegrid-slot","fc-timegrid-slot-label",e.isLabeled?"fc-scrollgrid-shrink":"fc-timegrid-slot-minor"];return createElement(ViewContextType.Consumer,null,(i=>{if(!e.isLabeled)return createElement("td",{className:t.join(" "),"data-time":e.isoTimeStr});let{dateEnv:r,options:n,viewApi:o}=i,s=null==n.slotLabelFormat?DEFAULT_SLAT_LABEL_FORMAT:Array.isArray(n.slotLabelFormat)?createFormatter(n.slotLabelFormat[0]):createFormatter(n.slotLabelFormat),l={level:0,time:e.time,date:r.toDate(e.date),view:o,text:r.format(e.date,s)};return createElement(ContentContainer,{elTag:"td",elClasses:t,elAttrs:{"data-time":e.isoTimeStr},renderProps:l,generatorName:"slotLabelContent",customGenerator:n.slotLabelContent,defaultGenerator:renderInnerContent,classNameGenerator:n.slotLabelClassNames,didMount:n.slotLabelDidMount,willUnmount:n.slotLabelWillUnmount},(e=>createElement("div",{className:"fc-timegrid-slot-label-frame fc-scrollgrid-shrink-frame"},createElement(e,{elTag:"div",elClasses:["fc-timegrid-slot-label-cushion","fc-scrollgrid-shrink-cushion"]}))))}))}function renderInnerContent(e){return e.text}class TimeBodyAxis extends BaseComponent{render(){return this.props.slatMetas.map((e=>createElement("tr",{key:e.key},createElement(TimeColsAxisCell,Object.assign({},e)))))}}const DEFAULT_WEEK_NUM_FORMAT=createFormatter({week:"short"}),AUTO_ALL_DAY_MAX_EVENT_ROWS=5;class TimeColsView extends DateComponent{constructor(){super(...arguments),this.allDaySplitter=new AllDaySplitter,this.headerElRef=createRef(),this.rootElRef=createRef(),this.scrollerElRef=createRef(),this.state={slatCoords:null},this.handleScrollTopRequest=e=>{let t=this.scrollerElRef.current;t&&(t.scrollTop=e)},this.renderHeadAxis=(e,t="")=>{let{options:i}=this.context,{dateProfile:r}=this.props,n=r.renderRange,o=1===diffDays(n.start,n.end)?buildNavLinkAttrs(this.context,n.start,"week"):{};return i.weekNumbers&&"day"===e?createElement(WeekNumberContainer,{elTag:"th",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},date:n.start,defaultFormat:DEFAULT_WEEK_NUM_FORMAT},(e=>createElement("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame","fc-timegrid-axis-frame-liquid"].join(" "),style:{height:t}},createElement(e,{elTag:"a",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"],elAttrs:o})))):createElement("th",{"aria-hidden":!0,className:"fc-timegrid-axis"},createElement("div",{className:"fc-timegrid-axis-frame",style:{height:t}}))},this.renderTableRowAxis=e=>{let{options:t,viewApi:i}=this.context,r={text:t.allDayText,view:i};return createElement(ContentContainer,{elTag:"td",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},renderProps:r,generatorName:"allDayContent",customGenerator:t.allDayContent,defaultGenerator:renderAllDayInner,classNameGenerator:t.allDayClassNames,didMount:t.allDayDidMount,willUnmount:t.allDayWillUnmount},(t=>createElement("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame",null==e?" fc-timegrid-axis-frame-liquid":""].join(" "),style:{height:e}},createElement(t,{elTag:"span",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"]}))))},this.handleSlatCoords=e=>{this.setState({slatCoords:e})}}renderSimpleLayout(e,t,i){let{context:r,props:n}=this,o=[],s=getStickyHeaderDates(r.options);return e&&o.push({type:"header",key:"header",isSticky:s,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),t&&(o.push({type:"body",key:"all-day",chunk:{content:t}}),o.push({type:"body",key:"all-day-divider",outerContent:createElement("tr",{role:"presentation",className:"fc-scrollgrid-section"},createElement("td",{className:"fc-timegrid-divider "+r.theme.getClass("tableCellShaded")}))})),o.push({type:"body",key:"body",liquid:!0,expandRows:Boolean(r.options.expandRows),chunk:{scrollerElRef:this.scrollerElRef,content:i}}),createElement(ViewContainer,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:r.viewSpec},createElement(SimpleScrollGrid,{liquid:!n.isHeightAuto&&!n.forPrint,collapsibleWidth:n.forPrint,cols:[{width:"shrink"}],sections:o}))}renderHScrollLayout(e,t,i,r,n,o,s){let l=this.context.pluginHooks.scrollGridImpl;if(!l)throw new Error("No ScrollGrid implementation");let{context:a,props:c}=this,d=!c.forPrint&&getStickyHeaderDates(a.options),m=!c.forPrint&&getStickyFooterScrollbar(a.options),f=[];e&&f.push({type:"header",key:"header",isSticky:d,syncRowHeights:!0,chunks:[{key:"axis",rowContent:e=>createElement("tr",{role:"presentation"},this.renderHeadAxis("day",e.rowSyncHeights[0]))},{key:"cols",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),t&&(f.push({type:"body",key:"all-day",syncRowHeights:!0,chunks:[{key:"axis",rowContent:e=>createElement("tr",{role:"presentation"},this.renderTableRowAxis(e.rowSyncHeights[0]))},{key:"cols",content:t}]}),f.push({key:"all-day-divider",type:"body",outerContent:createElement("tr",{role:"presentation",className:"fc-scrollgrid-section"},createElement("td",{colSpan:2,className:"fc-timegrid-divider "+a.theme.getClass("tableCellShaded")}))}));let g=a.options.nowIndicator;return f.push({type:"body",key:"body",liquid:!0,expandRows:Boolean(a.options.expandRows),chunks:[{key:"axis",content:e=>createElement("div",{className:"fc-timegrid-axis-chunk"},createElement("table",{"aria-hidden":!0,style:{height:e.expandRows?e.clientHeight:""}},e.tableColGroupNode,createElement("tbody",null,createElement(TimeBodyAxis,{slatMetas:o}))),createElement("div",{className:"fc-timegrid-now-indicator-container"},createElement(NowTimer,{unit:g?"minute":"day"},(e=>{let t=g&&s&&s.safeComputeTop(e);return"number"==typeof t?createElement(NowIndicatorContainer,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:t},isAxis:!0,date:e}):null}))))},{key:"cols",scrollerElRef:this.scrollerElRef,content:i}]}),m&&f.push({key:"footer",type:"footer",isSticky:!0,chunks:[{key:"axis",content:renderScrollShim},{key:"cols",content:renderScrollShim}]}),createElement(ViewContainer,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:a.viewSpec},createElement(l,{liquid:!c.isHeightAuto&&!c.forPrint,forPrint:c.forPrint,collapsibleWidth:!1,colGroups:[{width:"shrink",cols:[{width:"shrink"}]},{cols:[{span:r,minWidth:n}]}],sections:f}))}getAllDayMaxEventProps(){let{dayMaxEvents:e,dayMaxEventRows:t}=this.context.options;return!0!==e&&!0!==t||(e=void 0,t=5),{dayMaxEvents:e,dayMaxEventRows:t}}}function renderAllDayInner(e){return e.text}class TimeColsSlatsCoords{constructor(e,t,i){this.positions=e,this.dateProfile=t,this.slotDuration=i}safeComputeTop(e){let{dateProfile:t}=this;if(rangeContainsMarker(t.currentRange,e)){let i=startOfDay(e),r=e.valueOf()-i.valueOf();if(r>=asRoughMs(t.slotMinTime)&&r<asRoughMs(t.slotMaxTime))return this.computeTimeTop(createDuration(r))}return null}computeDateTop(e,t){return t||(t=startOfDay(e)),this.computeTimeTop(createDuration(e.valueOf()-t.valueOf()))}computeTimeTop(e){let t,i,{positions:r,dateProfile:n}=this,o=r.els.length,s=(e.milliseconds-asRoughMs(n.slotMinTime))/asRoughMs(this.slotDuration);return s=Math.max(0,s),s=Math.min(o,s),t=Math.floor(s),t=Math.min(t,o-1),i=s-t,r.tops[t]+r.getHeight(t)*i}}class TimeColsSlatsBody extends BaseComponent{render(){let{props:e,context:t}=this,{options:i}=t,{slatElRefs:r}=e;return createElement("tbody",null,e.slatMetas.map(((n,o)=>{let s={time:n.time,date:t.dateEnv.toDate(n.date),view:t.viewApi};return createElement("tr",{key:n.key,ref:r.createRef(n.key)},e.axis&&createElement(TimeColsAxisCell,Object.assign({},n)),createElement(ContentContainer,{elTag:"td",elClasses:["fc-timegrid-slot","fc-timegrid-slot-lane",!n.isLabeled&&"fc-timegrid-slot-minor"],elAttrs:{"data-time":n.isoTimeStr},renderProps:s,generatorName:"slotLaneContent",customGenerator:i.slotLaneContent,classNameGenerator:i.slotLaneClassNames,didMount:i.slotLaneDidMount,willUnmount:i.slotLaneWillUnmount}))})))}}class TimeColsSlats extends BaseComponent{constructor(){super(...arguments),this.rootElRef=createRef(),this.slatElRefs=new RefMap}render(){let{props:e,context:t}=this;return createElement("div",{ref:this.rootElRef,className:"fc-timegrid-slots"},createElement("table",{"aria-hidden":!0,className:t.theme.getClass("table"),style:{minWidth:e.tableMinWidth,width:e.clientWidth,height:e.minHeight}},e.tableColGroupNode,createElement(TimeColsSlatsBody,{slatElRefs:this.slatElRefs,axis:e.axis,slatMetas:e.slatMetas})))}componentDidMount(){this.updateSizing()}componentDidUpdate(){this.updateSizing()}componentWillUnmount(){this.props.onCoords&&this.props.onCoords(null)}updateSizing(){let{context:e,props:t}=this;if(t.onCoords&&null!==t.clientWidth){this.rootElRef.current.offsetHeight&&t.onCoords(new TimeColsSlatsCoords(new PositionCache(this.rootElRef.current,collectSlatEls(this.slatElRefs.currentMap,t.slatMetas),!1,!0),this.props.dateProfile,e.options.slotDuration))}}}function collectSlatEls(e,t){return t.map((t=>e[t.key]))}function splitSegsByCol(e,t){let i,r=[];for(i=0;i<t;i+=1)r.push([]);if(e)for(i=0;i<e.length;i+=1)r[e[i].col].push(e[i]);return r}function splitInteractionByCol(e,t){let i=[];if(e){for(let r=0;r<t;r+=1)i[r]={affectedInstances:e.affectedInstances,isEvent:e.isEvent,segs:[]};for(let t of e.segs)i[t.col].segs.push(t)}else for(let e=0;e<t;e+=1)i[e]=null;return i}class TimeColMoreLink extends BaseComponent{render(){let{props:e}=this;return createElement(MoreLinkContainer,{elClasses:["fc-timegrid-more-link"],elStyle:{top:e.top,bottom:e.bottom},allDayDate:null,moreCnt:e.hiddenSegs.length,allSegs:e.hiddenSegs,hiddenSegs:e.hiddenSegs,extraDateSpan:e.extraDateSpan,dateProfile:e.dateProfile,todayRange:e.todayRange,popoverContent:()=>renderPlainFgSegs(e.hiddenSegs,e),defaultGenerator:renderMoreLinkInner,forceTimed:!0},(e=>createElement(e,{elTag:"div",elClasses:["fc-timegrid-more-link-inner","fc-sticky"]})))}}function renderMoreLinkInner(e){return e.shortText}function buildPositioning(e,t,i){let r=new SegHierarchy;null!=t&&(r.strictOrder=t),null!=i&&(r.maxStackCnt=i);let n=r.addSegs(e),o=groupIntersectingEntries(n),s=buildWeb(r);return s=stretchWeb(s,1),{segRects:webToRects(s),hiddenGroups:o}}function buildWeb(e){const{entriesByLevel:t}=e,i=cacheable(((e,t)=>e+":"+t),((r,n)=>{let o=buildNodes(findNextLevelSegs(e,r,n),i),s=t[r][n];return[Object.assign(Object.assign({},s),{nextLevelNodes:o[0]}),s.thickness+o[1]]}));return buildNodes(t.length?{level:0,lateralStart:0,lateralEnd:t[0].length}:null,i)[0]}function buildNodes(e,t){if(!e)return[[],0];let{level:i,lateralStart:r,lateralEnd:n}=e,o=r,s=[];for(;o<n;)s.push(t(i,o)),o+=1;return s.sort(cmpDescPressures),[s.map(extractNode),s[0][1]]}function cmpDescPressures(e,t){return t[1]-e[1]}function extractNode(e){return e[0]}function findNextLevelSegs(e,t,i){let{levelCoords:r,entriesByLevel:n}=e,o=n[t][i],s=r[t]+o.thickness,l=r.length,a=t;for(;a<l&&r[a]<s;a+=1);for(;a<l;a+=1){let e,t=n[a],i=binarySearch(t,o.span.start,getEntrySpanEnd),r=i[0]+i[1],s=r;for(;(e=t[s])&&e.span.start<o.span.end;)s+=1;if(r<s)return{level:a,lateralStart:r,lateralEnd:s}}return null}function stretchWeb(e,t){const i=cacheable(((e,t,i)=>buildEntryKey(e)),((e,r,n)=>{let o,{nextLevelNodes:s,thickness:l}=e,a=l+n,c=l/a,d=[];if(s.length)for(let e of s)if(void 0===o){let t=i(e,r,a);o=t[0],d.push(t[1])}else{let t=i(e,o,0);d.push(t[1])}else o=t;let m=(o-r)*c;return[o-m,Object.assign(Object.assign({},e),{thickness:m,nextLevelNodes:d})]}));return e.map((e=>i(e,0,0)[1]))}function webToRects(e){let t=[];const i=cacheable(((e,t,i)=>buildEntryKey(e)),((e,i,n)=>{let o=Object.assign(Object.assign({},e),{levelCoord:i,stackDepth:n,stackForward:0});return t.push(o),o.stackForward=r(e.nextLevelNodes,i+e.thickness,n+1)+1}));function r(e,t,r){let n=0;for(let o of e)n=Math.max(i(o,t,r),n);return n}return r(e,0,0),t}function cacheable(e,t){const i={};return(...r)=>{let n=e(...r);return n in i?i[n]:i[n]=t(...r)}}function computeSegVCoords(e,t,i=null,r=0){let n=[];if(i)for(let o=0;o<e.length;o+=1){let s=e[o],l=i.computeDateTop(s.start,t),a=Math.max(l+(r||0),i.computeDateTop(s.end,t));n.push({start:Math.round(l),end:Math.round(a)})}return n}function computeFgSegPlacements(e,t,i,r){let n=[],o=[];for(let i=0;i<e.length;i+=1){let r=t[i];r?n.push({index:i,thickness:1,span:r}):o.push(e[i])}let{segRects:s,hiddenGroups:l}=buildPositioning(n,i,r),a=[];for(let t of s)a.push({seg:e[t.index],rect:t});for(let e of o)a.push({seg:e,rect:null});return{segPlacements:a,hiddenGroups:l}}const DEFAULT_TIME_FORMAT=createFormatter({hour:"numeric",minute:"2-digit",meridiem:!1});class TimeColEvent extends BaseComponent{render(){return createElement(StandardEvent,Object.assign({},this.props,{elClasses:["fc-timegrid-event","fc-v-event",this.props.isShort&&"fc-timegrid-event-short"],defaultTimeFormat:DEFAULT_TIME_FORMAT}))}}class TimeCol extends BaseComponent{constructor(){super(...arguments),this.sortEventSegs=memoize(sortEventSegs)}render(){let{props:e,context:t}=this,{options:i}=t,r=i.selectMirror,n=e.eventDrag&&e.eventDrag.segs||e.eventResize&&e.eventResize.segs||r&&e.dateSelectionSegs||[],o=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{},s=this.sortEventSegs(e.fgEventSegs,i.eventOrder);return createElement(DayCellContainer,{elTag:"td",elRef:e.elRef,elClasses:["fc-timegrid-col",...e.extraClassNames||[]],elAttrs:Object.assign({role:"gridcell"},e.extraDataAttrs),date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,extraRenderProps:e.extraRenderProps},(t=>createElement("div",{className:"fc-timegrid-col-frame"},createElement("div",{className:"fc-timegrid-col-bg"},this.renderFillSegs(e.businessHourSegs,"non-business"),this.renderFillSegs(e.bgEventSegs,"bg-event"),this.renderFillSegs(e.dateSelectionSegs,"highlight")),createElement("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(s,o,!1,!1,!1)),createElement("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(n,{},Boolean(e.eventDrag),Boolean(e.eventResize),Boolean(r),"mirror")),createElement("div",{className:"fc-timegrid-now-indicator-container"},this.renderNowIndicator(e.nowIndicatorSegs)),hasCustomDayCellContent(i)&&createElement(t,{elTag:"div",elClasses:["fc-timegrid-col-misc"]}))))}renderFgSegs(e,t,i,r,n,o){let{props:s}=this;return s.forPrint?renderPlainFgSegs(e,s):this.renderPositionedFgSegs(e,t,i,r,n,o)}renderPositionedFgSegs(e,t,i,r,n,o){let{eventMaxStack:s,eventShortHeight:l,eventOrderStrict:a,eventMinHeight:c}=this.context.options,{date:d,slatCoords:m,eventSelection:f,todayRange:g,nowDate:h}=this.props,p=i||r||n,u=computeSegVCoords(e,d,m,c),{segPlacements:v,hiddenGroups:S}=computeFgSegPlacements(e,u,a,s);return createElement(Fragment,null,this.renderHiddenGroups(S,e),v.map((e=>{let{seg:s,rect:a}=e,c=s.eventRange.instance.instanceId,d=p||Boolean(!t[c]&&a),m=computeSegVStyle(a&&a.span),u=!p&&a?this.computeSegHStyle(a):{left:0,right:0},v=Boolean(a)&&a.stackForward>0,S=Boolean(a)&&a.span.end-a.span.start<l;return createElement("div",{className:"fc-timegrid-event-harness"+(v?" fc-timegrid-event-harness-inset":""),key:o||c,style:Object.assign(Object.assign({visibility:d?"":"hidden"},m),u)},createElement(TimeColEvent,Object.assign({seg:s,isDragging:i,isResizing:r,isDateSelecting:n,isSelected:c===f,isShort:S},getSegMeta(s,g,h))))})))}renderHiddenGroups(e,t){let{extraDateSpan:i,dateProfile:r,todayRange:n,nowDate:o,eventSelection:s,eventDrag:l,eventResize:a}=this.props;return createElement(Fragment,null,e.map((e=>{let c=computeSegVStyle(e.span),d=compileSegsFromEntries(e.entries,t);return createElement(TimeColMoreLink,{key:buildIsoString(computeEarliestSegStart(d)),hiddenSegs:d,top:c.top,bottom:c.bottom,extraDateSpan:i,dateProfile:r,todayRange:n,nowDate:o,eventSelection:s,eventDrag:l,eventResize:a})})))}renderFillSegs(e,t){let{props:i,context:r}=this,n=computeSegVCoords(e,i.date,i.slatCoords,r.options.eventMinHeight).map(((r,n)=>{let o=e[n];return createElement("div",{key:buildEventRangeKey(o.eventRange),className:"fc-timegrid-bg-harness",style:computeSegVStyle(r)},"bg-event"===t?createElement(BgEvent,Object.assign({seg:o},getSegMeta(o,i.todayRange,i.nowDate))):renderFill(t))}));return createElement(Fragment,null,n)}renderNowIndicator(e){let{slatCoords:t,date:i}=this.props;return t?e.map(((e,r)=>createElement(NowIndicatorContainer,{key:r,elClasses:["fc-timegrid-now-indicator-line"],elStyle:{top:t.computeDateTop(e.start,i)},isAxis:!1,date:i}))):null}computeSegHStyle(e){let t,i,{isRtl:r,options:n}=this.context,o=n.slotEventOverlap,s=e.levelCoord,l=e.levelCoord+e.thickness;o&&(l=Math.min(1,s+2*(l-s))),r?(t=1-l,i=s):(t=s,i=1-l);let a={zIndex:e.stackDepth+1,left:100*t+"%",right:100*i+"%"};return o&&!e.stackForward&&(a[r?"marginLeft":"marginRight"]=20),a}}function renderPlainFgSegs(e,{todayRange:t,nowDate:i,eventSelection:r,eventDrag:n,eventResize:o}){let s=(n?n.affectedInstances:null)||(o?o.affectedInstances:null)||{};return createElement(Fragment,null,e.map((e=>{let n=e.eventRange.instance.instanceId;return createElement("div",{key:n,style:{visibility:s[n]?"hidden":""}},createElement(TimeColEvent,Object.assign({seg:e,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:n===r,isShort:!1},getSegMeta(e,t,i))))})))}function computeSegVStyle(e){return e?{top:e.start,bottom:-e.end}:{top:"",bottom:""}}function compileSegsFromEntries(e,t){return e.map((e=>t[e.index]))}class TimeColsContent extends BaseComponent{constructor(){super(...arguments),this.splitFgEventSegs=memoize(splitSegsByCol),this.splitBgEventSegs=memoize(splitSegsByCol),this.splitBusinessHourSegs=memoize(splitSegsByCol),this.splitNowIndicatorSegs=memoize(splitSegsByCol),this.splitDateSelectionSegs=memoize(splitSegsByCol),this.splitEventDrag=memoize(splitInteractionByCol),this.splitEventResize=memoize(splitInteractionByCol),this.rootElRef=createRef(),this.cellElRefs=new RefMap}render(){let{props:e,context:t}=this,i=t.options.nowIndicator&&e.slatCoords&&e.slatCoords.safeComputeTop(e.nowDate),r=e.cells.length,n=this.splitFgEventSegs(e.fgEventSegs,r),o=this.splitBgEventSegs(e.bgEventSegs,r),s=this.splitBusinessHourSegs(e.businessHourSegs,r),l=this.splitNowIndicatorSegs(e.nowIndicatorSegs,r),a=this.splitDateSelectionSegs(e.dateSelectionSegs,r),c=this.splitEventDrag(e.eventDrag,r),d=this.splitEventResize(e.eventResize,r);return createElement("div",{className:"fc-timegrid-cols",ref:this.rootElRef},createElement("table",{role:"presentation",style:{minWidth:e.tableMinWidth,width:e.clientWidth}},e.tableColGroupNode,createElement("tbody",{role:"presentation"},createElement("tr",{role:"row"},e.axis&&createElement("td",{"aria-hidden":!0,className:"fc-timegrid-col fc-timegrid-axis"},createElement("div",{className:"fc-timegrid-col-frame"},createElement("div",{className:"fc-timegrid-now-indicator-container"},"number"==typeof i&&createElement(NowIndicatorContainer,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:i},isAxis:!0,date:e.nowDate})))),e.cells.map(((t,i)=>createElement(TimeCol,{key:t.key,elRef:this.cellElRefs.createRef(t.key),dateProfile:e.dateProfile,date:t.date,nowDate:e.nowDate,todayRange:e.todayRange,extraRenderProps:t.extraRenderProps,extraDataAttrs:t.extraDataAttrs,extraClassNames:t.extraClassNames,extraDateSpan:t.extraDateSpan,fgEventSegs:n[i],bgEventSegs:o[i],businessHourSegs:s[i],nowIndicatorSegs:l[i],dateSelectionSegs:a[i],eventDrag:c[i],eventResize:d[i],slatCoords:e.slatCoords,eventSelection:e.eventSelection,forPrint:e.forPrint})))))))}componentDidMount(){this.updateCoords()}componentDidUpdate(){this.updateCoords()}updateCoords(){let{props:e}=this;e.onColCoords&&null!==e.clientWidth&&e.onColCoords(new PositionCache(this.rootElRef.current,collectCellEls(this.cellElRefs.currentMap,e.cells),!0,!1))}}function collectCellEls(e,t){return t.map((t=>e[t.key]))}class TimeCols extends DateComponent{constructor(){super(...arguments),this.processSlotOptions=memoize(processSlotOptions),this.state={slatCoords:null},this.handleRootEl=e=>{e?this.context.registerInteractiveComponent(this,{el:e,isHitComboAllowed:this.props.isHitComboAllowed}):this.context.unregisterInteractiveComponent(this)},this.handleScrollRequest=e=>{let{onScrollTopRequest:t}=this.props,{slatCoords:i}=this.state;if(t&&i){if(e.time){let r=i.computeTimeTop(e.time);r=Math.ceil(r),r&&(r+=1),t(r)}return!0}return!1},this.handleColCoords=e=>{this.colCoords=e},this.handleSlatCoords=e=>{this.setState({slatCoords:e}),this.props.onSlatCoords&&this.props.onSlatCoords(e)}}render(){let{props:e,state:t}=this;return createElement("div",{className:"fc-timegrid-body",ref:this.handleRootEl,style:{width:e.clientWidth,minWidth:e.tableMinWidth}},createElement(TimeColsSlats,{axis:e.axis,dateProfile:e.dateProfile,slatMetas:e.slatMetas,clientWidth:e.clientWidth,minHeight:e.expandRows?e.clientHeight:"",tableMinWidth:e.tableMinWidth,tableColGroupNode:e.axis?e.tableColGroupNode:null,onCoords:this.handleSlatCoords}),createElement(TimeColsContent,{cells:e.cells,axis:e.axis,dateProfile:e.dateProfile,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,todayRange:e.todayRange,nowDate:e.nowDate,nowIndicatorSegs:e.nowIndicatorSegs,clientWidth:e.clientWidth,tableMinWidth:e.tableMinWidth,tableColGroupNode:e.tableColGroupNode,slatCoords:t.slatCoords,onColCoords:this.handleColCoords,forPrint:e.forPrint}))}componentDidMount(){this.scrollResponder=this.context.createScrollResponder(this.handleScrollRequest)}componentDidUpdate(e){this.scrollResponder.update(e.dateProfile!==this.props.dateProfile)}componentWillUnmount(){this.scrollResponder.detach()}queryHit(e,t){let{dateEnv:i,options:r}=this.context,{colCoords:n}=this,{dateProfile:o}=this.props,{slatCoords:s}=this.state,{snapDuration:l,snapsPerSlot:a}=this.processSlotOptions(this.props.slotDuration,r.snapDuration),c=n.leftToIndex(e),d=s.positions.topToIndex(t);if(null!=c&&null!=d){let e=this.props.cells[c],r=s.positions.tops[d],m=s.positions.getHeight(d),f=(t-r)/m,g=d*a+Math.floor(f*a),h=this.props.cells[c].date,p=addDurations(o.slotMinTime,multiplyDuration(l,g)),u=i.add(h,p),v=i.add(u,l);return{dateProfile:o,dateSpan:Object.assign({range:{start:u,end:v},allDay:!1},e.extraDateSpan),dayEl:n.els[c],rect:{left:n.lefts[c],right:n.rights[c],top:r,bottom:r+m},layer:0}}return null}}function processSlotOptions(e,t){let i=t||e,r=wholeDivideDurations(e,i);return null===r&&(i=e,r=1),{snapDuration:i,snapsPerSlot:r}}class DayTimeColsSlicer extends Slicer{sliceRange(e,t){let i=[];for(let r=0;r<t.length;r+=1){let n=intersectRanges(e,t[r]);n&&i.push({start:n.start,end:n.end,isStart:n.start.valueOf()===e.start.valueOf(),isEnd:n.end.valueOf()===e.end.valueOf(),col:r})}return i}}class DayTimeCols extends DateComponent{constructor(){super(...arguments),this.buildDayRanges=memoize(buildDayRanges),this.slicer=new DayTimeColsSlicer,this.timeColsRef=createRef()}render(){let{props:e,context:t}=this,{dateProfile:i,dayTableModel:r}=e,{nowIndicator:n,nextDayThreshold:o}=t.options,s=this.buildDayRanges(r,i,t.dateEnv);return createElement(NowTimer,{unit:n?"minute":"day"},((l,a)=>createElement(TimeCols,Object.assign({ref:this.timeColsRef},this.slicer.sliceProps(e,i,null,t,s),{forPrint:e.forPrint,axis:e.axis,dateProfile:i,slatMetas:e.slatMetas,slotDuration:e.slotDuration,cells:r.cells[0],tableColGroupNode:e.tableColGroupNode,tableMinWidth:e.tableMinWidth,clientWidth:e.clientWidth,clientHeight:e.clientHeight,expandRows:e.expandRows,nowDate:l,nowIndicatorSegs:n&&this.slicer.sliceNowDate(l,i,o,t,s),todayRange:a,onScrollTopRequest:e.onScrollTopRequest,onSlatCoords:e.onSlatCoords}))))}}function buildDayRanges(e,t,i){let r=[];for(let n of e.headerDates)r.push({start:i.add(n,t.slotMinTime),end:i.add(n,t.slotMaxTime)});return r}const STOCK_SUB_DURATIONS=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];function buildSlatMetas(e,t,i,r,n){let o=new Date(0),s=e,l=createDuration(0),a=i||computeLabelInterval(r),c=[];for(;asRoughMs(s)<asRoughMs(t);){let e=n.add(o,s),t=null!==wholeDivideDurations(l,a);c.push({date:e,time:s,key:e.toISOString(),isoTimeStr:formatIsoTimeString(e),isLabeled:t}),s=addDurations(s,r),l=addDurations(l,r)}return c}function computeLabelInterval(e){let t,i,r;for(t=STOCK_SUB_DURATIONS.length-1;t>=0;t-=1)if(i=createDuration(STOCK_SUB_DURATIONS[t]),r=wholeDivideDurations(i,e),null!==r&&r>1)return i;return e}class DayTimeColsView extends TimeColsView{constructor(){super(...arguments),this.buildTimeColsModel=memoize(buildTimeColsModel),this.buildSlatMetas=memoize(buildSlatMetas)}render(){let{options:e,dateEnv:t,dateProfileGenerator:i}=this.context,{props:r}=this,{dateProfile:n}=r,o=this.buildTimeColsModel(n,i),s=this.allDaySplitter.splitProps(r),l=this.buildSlatMetas(n.slotMinTime,n.slotMaxTime,e.slotLabelInterval,e.slotDuration,t),{dayMinWidth:a}=e,c=!a,d=a,m=e.dayHeaders&&createElement(DayHeader,{dates:o.headerDates,dateProfile:n,datesRepDistinctDays:!0,renderIntro:c?this.renderHeadAxis:null}),f=!1!==e.allDaySlot&&(t=>createElement(DayTable,Object.assign({},s.allDay,{dateProfile:n,dayTableModel:o,nextDayThreshold:e.nextDayThreshold,tableMinWidth:t.tableMinWidth,colGroupNode:t.tableColGroupNode,renderRowIntro:c?this.renderTableRowAxis:null,showWeekNumbers:!1,expandRows:!1,headerAlignElRef:this.headerElRef,clientWidth:t.clientWidth,clientHeight:t.clientHeight,forPrint:r.forPrint},this.getAllDayMaxEventProps()))),g=t=>createElement(DayTimeCols,Object.assign({},s.timed,{dayTableModel:o,dateProfile:n,axis:c,slotDuration:e.slotDuration,slatMetas:l,forPrint:r.forPrint,tableColGroupNode:t.tableColGroupNode,tableMinWidth:t.tableMinWidth,clientWidth:t.clientWidth,clientHeight:t.clientHeight,onSlatCoords:this.handleSlatCoords,expandRows:t.expandRows,onScrollTopRequest:this.handleScrollTopRequest}));return d?this.renderHScrollLayout(m,f,g,o.colCnt,a,l,this.state.slatCoords):this.renderSimpleLayout(m,f,g)}}function buildTimeColsModel(e,t){let i=new DaySeriesModel(e.renderRange,t);return new DayTableModel(i,!1)}var css_248z='.fc-v-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-v-event .fc-event-main{color:var(--fc-event-text-color);height:100%}.fc-v-event .fc-event-main-frame{display:flex;flex-direction:column;height:100%}.fc-v-event .fc-event-time{flex-grow:0;flex-shrink:0;max-height:100%;overflow:hidden}.fc-v-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-height:0}.fc-v-event .fc-event-title{bottom:0;max-height:100%;overflow:hidden;top:0}.fc-v-event:not(.fc-event-start){border-top-left-radius:0;border-top-right-radius:0;border-top-width:0}.fc-v-event:not(.fc-event-end){border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-width:0}.fc-v-event.fc-event-selected:before{left:-10px;right:-10px}.fc-v-event .fc-event-resizer-start{cursor:n-resize}.fc-v-event .fc-event-resizer-end{cursor:s-resize}.fc-v-event:not(.fc-event-selected) .fc-event-resizer{height:var(--fc-event-resizer-thickness);left:0;right:0}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-start{top:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer{left:50%;margin-left:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-start{top:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc .fc-timegrid .fc-daygrid-body{z-index:2}.fc .fc-timegrid-divider{padding:0 0 2px}.fc .fc-timegrid-body{min-height:100%;position:relative;z-index:1}.fc .fc-timegrid-axis-chunk{position:relative}.fc .fc-timegrid-axis-chunk>table,.fc .fc-timegrid-slots{position:relative;z-index:1}.fc .fc-timegrid-slot{border-bottom:0;height:1.5em}.fc .fc-timegrid-slot:empty:before{content:"\\00a0"}.fc .fc-timegrid-slot-minor{border-top-style:dotted}.fc .fc-timegrid-slot-label-cushion{display:inline-block;white-space:nowrap}.fc .fc-timegrid-slot-label{vertical-align:middle}.fc .fc-timegrid-axis-cushion,.fc .fc-timegrid-slot-label-cushion{padding:0 4px}.fc .fc-timegrid-axis-frame-liquid{height:100%}.fc .fc-timegrid-axis-frame{align-items:center;display:flex;justify-content:flex-end;overflow:hidden}.fc .fc-timegrid-axis-cushion{flex-shrink:0;max-width:60px}.fc-direction-ltr .fc-timegrid-slot-label-frame{text-align:right}.fc-direction-rtl .fc-timegrid-slot-label-frame{text-align:left}.fc-liquid-hack .fc-timegrid-axis-frame-liquid{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-timegrid-col-frame{min-height:100%;position:relative}.fc-media-screen.fc-liquid-hack .fc-timegrid-col-frame{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols{bottom:0;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols>table{height:100%}.fc-media-screen .fc-timegrid-col-bg,.fc-media-screen .fc-timegrid-col-events,.fc-media-screen .fc-timegrid-now-indicator-container{left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col-bg{z-index:2}.fc .fc-timegrid-col-bg .fc-non-business{z-index:1}.fc .fc-timegrid-col-bg .fc-bg-event{z-index:2}.fc .fc-timegrid-col-bg .fc-highlight{z-index:3}.fc .fc-timegrid-bg-harness{left:0;position:absolute;right:0}.fc .fc-timegrid-col-events{z-index:3}.fc .fc-timegrid-now-indicator-container{bottom:0;overflow:hidden}.fc-direction-ltr .fc-timegrid-col-events{margin:0 2.5% 0 2px}.fc-direction-rtl .fc-timegrid-col-events{margin:0 2px 0 2.5%}.fc-timegrid-event-harness{position:absolute}.fc-timegrid-event-harness>.fc-timegrid-event{bottom:0;left:0;position:absolute;right:0;top:0}.fc-timegrid-event-harness-inset .fc-timegrid-event,.fc-timegrid-event.fc-event-mirror,.fc-timegrid-more-link{box-shadow:0 0 0 1px var(--fc-page-bg-color)}.fc-timegrid-event,.fc-timegrid-more-link{border-radius:3px;font-size:var(--fc-small-font-size)}.fc-timegrid-event{margin-bottom:1px}.fc-timegrid-event .fc-event-main{padding:1px 1px 0}.fc-timegrid-event .fc-event-time{font-size:var(--fc-small-font-size);margin-bottom:1px;white-space:nowrap}.fc-timegrid-event-short .fc-event-main-frame{flex-direction:row;overflow:hidden}.fc-timegrid-event-short .fc-event-time:after{content:"\\00a0-\\00a0"}.fc-timegrid-event-short .fc-event-title{font-size:var(--fc-small-font-size)}.fc-timegrid-more-link{background:var(--fc-more-link-bg-color);color:var(--fc-more-link-text-color);cursor:pointer;margin-bottom:1px;position:absolute;z-index:9999}.fc-timegrid-more-link-inner{padding:3px 2px;top:0}.fc-direction-ltr .fc-timegrid-more-link{right:0}.fc-direction-rtl .fc-timegrid-more-link{left:0}.fc .fc-timegrid-now-indicator-arrow,.fc .fc-timegrid-now-indicator-line{pointer-events:none}.fc .fc-timegrid-now-indicator-line{border-color:var(--fc-now-indicator-color);border-style:solid;border-width:1px 0 0;left:0;position:absolute;right:0;z-index:4}.fc .fc-timegrid-now-indicator-arrow{border-color:var(--fc-now-indicator-color);border-style:solid;margin-top:-5px;position:absolute;z-index:4}.fc-direction-ltr .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 0 5px 6px;left:0}.fc-direction-rtl .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 6px 5px 0;right:0}';injectStyles(css_248z);export{DayTimeCols,DayTimeColsSlicer,DayTimeColsView,TimeCols,TimeColsSlatsCoords,TimeColsView,buildDayRanges,buildSlatMetas,buildTimeColsModel};
//# sourceMappingURL=/sm/c468600afc406bad69f9224ff7c3bb3857f08119fd9068ccc63ed63312403da2.map