/* Give the calendar some height so it doesn't feel empty while loading */
#calendar { min-height: 640px; }

/* Header (Mon, Tue...) */
.fc .fc-col-header-cell-cushion {
  font-weight: 600;
  letter-spacing: .02em;
  text-transform: none;
  padding: .75rem .25rem;
}

/* Day numbers */
.fc .fc-daygrid-day-number {
  font-size: 0.95rem;
  font-weight: 600;
  color: #334155;
  padding: .35rem .5rem .15rem .5rem;
}

/* Today highlight: subtle ring and soft background */
.fc .fc-day-today {
  background-color: rgba(13,110,253,.06);
}
.fc .fc-daygrid-day.fc-day-today .fc-daygrid-day-number {
  box-shadow: inset 0 0 0 2px rgba(13,110,253,.6);
  border-radius: .5rem;
}

/* Softer grid lines */
.fc-theme-standard .fc-scrollgrid,
.fc-theme-standard td,
.fc-theme-standard th {
  border-color: #e5e7eb;
}

/* Light Sunday tint */
.fc .fc-day-sun {
  background-image: linear-gradient(to bottom, rgba(148,163,184,.06), rgba(148,163,184,.06));
}

/* Ensure text inherits our dark color everywhere */
.fc .fc-event,
.fc .fc-event-main,
.fc .fc-event-title,
.fc .fc-event-time,
.fc .fc-list-event-title,
.fc .fc-list-event-time,
.fc .fc-event a {
  color: var(--pm-fg, #0f172a) !important;
  text-decoration: none;
}

/* Active view button */
[data-view].active { color: #fff; }

/* Shared event styling */
.fc .fc-event {
  border: 1px solid transparent;
  border-left-width: 4px;
  border-radius: .5rem;
  padding: .125rem .4rem;
}

/* VISIT — sky */
.fc-event.pm-cat-visit {
  --pm-bg: #e0f2fe;
  --pm-fg: #0c4a6e;
  --pm-br: #0ea5e9;
  background: var(--pm-bg);
  border-color: var(--pm-br);
}

/* INSP — amber */
.fc-event.pm-cat-insp {
  --pm-bg: #fef3c7;
  --pm-fg: #7c2d12;
  --pm-br: #f59e0b;
  background: var(--pm-bg);
  border-color: var(--pm-br);
}

/* CONFERENCE — violet */
.fc-event.pm-cat-conference {
  --pm-bg: #ede9fe;
  --pm-fg: #4c1d95;
  --pm-br: #8b5cf6;
  background: var(--pm-bg);
  border-color: var(--pm-br);
}

/* OTHER — slate */
.fc-event.pm-cat-other {
  --pm-bg: #f1f5f9;
  --pm-fg: #0f172a;
  --pm-br: #94a3b8;
  background: var(--pm-bg);
  border-color: var(--pm-br);
}

/* Improve contrast inside List view rows */
.fc-list-event-title, .fc-list-event-time, .fc-list-event-graphic {
  color: inherit;
}

/* Improve readability in tight spaces */
.fc .fc-daygrid-event .fc-event-time { font-weight: 600; }
.fc .fc-event-title { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

/* Focus/hover cue */
.fc .fc-event:hover, .fc .fc-event:focus {
  box-shadow: 0 0 0 2px var(--pm-br, #94a3b8);
  outline: none;
}

/* Tiny color dots inside filter pills */
#categoryFilters .btn[data-cat="Visit"]::before      { content:"• "; color:#0ea5e9; }
#categoryFilters .btn[data-cat="Insp"]::before       { content:"• "; color:#f59e0b; }
#categoryFilters .btn[data-cat="Conference"]::before { content:"• "; color:#8b5cf6; }
#categoryFilters .btn[data-cat="Other"]::before      { content:"• "; color:#94a3b8; }

/* Legend dots */
.legend-dot {
  display:inline-block;
  width:.75rem;
  height:.75rem;
  border-radius:50%;
  margin-right:.25rem;
}
.legend-dot.pm-cat-visit      { background:#0ea5e9; }
.legend-dot.pm-cat-insp       { background:#f59e0b; }
.legend-dot.pm-cat-conference { background:#8b5cf6; }
.legend-dot.pm-cat-other      { background:#94a3b8; }

.fc-event.pm-recurring::after {
  content: "\21BB";
  font-size: 11px;
  opacity: .7;
  margin-left: .35rem;
}

/* Event form offcanvas */
#eventFormCanvas {
  font-size: 1rem;
}

#eventFormCanvas .offcanvas-header {
  padding: .75rem 1rem .4rem;
}

#eventFormCanvas .offcanvas-body {
  padding: 1rem 1.15rem 1.5rem;
  background: #fff;
}

#eventFormCanvas .event-form-section {
  padding-bottom: 1.5rem;
  margin-bottom: 1.5rem;
  border-bottom: 1px solid rgba(148,163,184,.35);
}

#eventFormCanvas .event-form-section:last-child {
  margin-bottom: 0;
  padding-bottom: 0;
  border-bottom: 0;
}

#eventFormCanvas .event-form-heading {
  font-weight: 700;
  color: #475569;
  letter-spacing: .08em;
  font-size: .85rem;
}

#eventFormCanvas label,
#eventFormCanvas .form-label {
  font-weight: 600;
  color: #1e293b;
  letter-spacing: .01em;
  font-size: .92rem;
}

#eventFormCanvas .form-text,
#eventFormCanvas .event-form-help {
  font-size: .85rem;
  color: rgba(15,23,42,.75);
}

#eventFormCanvas input[type="text"],
#eventFormCanvas input[type="datetime-local"],
#eventFormCanvas select,
#eventFormCanvas textarea {
  border-radius: .65rem;
}

#eventFormCanvas .event-form-actions {
  display: flex;
  flex-wrap: wrap;
  gap: .6rem;
  justify-content: flex-end;
  padding-top: .75rem;
  margin-top: .35rem;
  border-top: 1px solid rgba(15,23,42,.06);
}

#eventFormCanvas .btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: .3rem;
  padding: .45rem 1rem;
  min-height: 2.25rem;
  border-radius: .55rem;
  font-weight: 600;
  letter-spacing: .01em;
  box-shadow: 0 1px 2px rgba(15,23,42,.1);
  transition: transform .12s ease, box-shadow .12s ease;
}

#eventFormCanvas .btn:focus-visible {
  outline: 3px solid rgba(59,130,246,.45);
  outline-offset: 2px;
}

#eventFormCanvas .btn-primary {
  background-color: #2563eb;
  border-color: #1d4ed8;
  color: #fff;
}

#eventFormCanvas .btn-primary:hover,
#eventFormCanvas .btn-primary:focus {
  background-color: #1d4ed8;
  border-color: #1e40af;
}

#eventFormCanvas .btn-secondary,
#eventFormCanvas .btn-outline-secondary {
  background-color: rgba(226,232,240,.9);
  border-color: rgba(148,163,184,.9);
  color: #0f172a;
}

#eventFormCanvas .btn-secondary:hover,
#eventFormCanvas .btn-secondary:focus,
#eventFormCanvas .btn-outline-secondary:hover,
#eventFormCanvas .btn-outline-secondary:focus {
  background-color: rgba(203,213,225,.95);
  border-color: rgba(100,116,139,.9);
  color: #0f172a;
}

#eventFormCanvas .btn-danger,
#eventFormCanvas .btn-outline-danger {
  background-color: rgba(248,113,113,.92);
  border-color: rgba(220,38,38,.95);
  color: #fff;
}

#eventFormCanvas .btn-danger:hover,
#eventFormCanvas .btn-danger:focus,
#eventFormCanvas .btn-outline-danger:hover,
#eventFormCanvas .btn-outline-danger:focus {
  background-color: rgba(220,38,38,.98);
  border-color: #991b1b;
}

#eventFormCanvas .btn-outline-secondary,
#eventFormCanvas .btn-outline-danger {
  box-shadow: none;
}

#eventFormCanvas .btn-outline-secondary {
  color: #1f2937;
}

#eventFormCanvas .btn-outline-danger {
  color: #fff;
}

#eventFormCanvas .btn:disabled,
#eventFormCanvas .btn.disabled,
#eventFormCanvas fieldset:disabled .btn {
  opacity: .65;
  box-shadow: none;
}

@media (prefers-color-scheme: dark) {
  #eventFormCanvas .offcanvas-body {
    background: linear-gradient(180deg, rgba(30,41,59,.8) 0%, rgba(15,23,42,.92) 60%, #0f172a 100%);
  }

  #eventFormCanvas .event-form-section {
    background-color: rgba(30,41,59,.95);
    border-color: rgba(148,163,184,.2);
    box-shadow: 0 1px 2px rgba(15,23,42,.35), 0 18px 40px -30px rgba(15,23,42,.8);
  }

  #eventFormCanvas .event-form-title,
  #eventFormCanvas label,
  #eventFormCanvas .form-label {
    color: #e2e8f0;
  }

  #eventFormCanvas .form-text,
  #eventFormCanvas .event-form-help {
    color: rgba(226,232,240,.75);
  }

  #eventFormCanvas .btn-secondary,
  #eventFormCanvas .btn-outline-secondary {
    background-color: rgba(71,85,105,.85);
    border-color: rgba(148,163,184,.5);
    color: #f8fafc;
  }

  #eventFormCanvas .btn-secondary:hover,
  #eventFormCanvas .btn-secondary:focus,
  #eventFormCanvas .btn-outline-secondary:hover,
  #eventFormCanvas .btn-outline-secondary:focus {
    background-color: rgba(100,116,139,.85);
    border-color: rgba(148,163,184,.75);
  }

  #eventFormCanvas .btn-outline-danger {
    background-color: transparent;
    color: #fecaca;
  }
}

/* Print: clean A4 month view */
@media print {
  nav, header, footer, #categoryFilters, #btnNewEvent, #btnPrev, #btnNext, [data-view], #btnToday { display: none !important; }
  #calendar { box-shadow: none; border: none; }
  .fc .fc-toolbar { display: none; }
}
#eventFormCanvas .offcanvas-title {
  font-size: 1.05rem;
}

#eventFormCanvas h6,
#eventFormCanvas .small,
#eventFormCanvas .form-check-label,
#eventFormCanvas .form-check-input,
#eventFormCanvas .btn,
#eventFormCanvas select,
#eventFormCanvas input,
#eventFormCanvas textarea {
  font-size: inherit;
}

#eventFormCanvas .event-form-section h6 {
  font-size: .8rem;
  letter-spacing: .08em;
}

#eventFormCanvas .event-form-section .small,
#eventFormCanvas .form-text,
#eventFormCanvas .event-form-help {
  font-size: .75rem;
}

#eventFormCanvas .event-form-section .row {
  --bs-gutter-x: .75rem;
  --bs-gutter-y: .5rem;
}

#eventFormCanvas input[type="text"],
#eventFormCanvas input[type="datetime-local"],
#eventFormCanvas input[type="date"],
#eventFormCanvas select,
#eventFormCanvas textarea {
  padding: .35rem .75rem;
}

#eventFormCanvas textarea {
  min-height: 6.5rem;
}
