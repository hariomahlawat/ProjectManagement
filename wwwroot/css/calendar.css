/* Give the calendar some height so it doesn't feel empty while loading */
#calendar { min-height: 640px; }

/* Header (Mon, Tue...) */
.fc .fc-col-header-cell-cushion {
  font-weight: 600;
  letter-spacing: .02em;
  text-transform: none;
  padding: .75rem .25rem;
}

/* Day numbers */
.fc .fc-daygrid-day-number {
  font-size: var(--pm-font-size-comfortable);
  font-weight: 600;
  color: var(--pm-text-contrast);
  padding: .35rem .5rem .15rem .5rem;
}

/* Today highlight: subtle ring and soft background */
.fc .fc-day-today {
  background-color: rgba(13,110,253,.06);
}
.fc .fc-daygrid-day.fc-day-today .fc-daygrid-day-number {
  box-shadow: inset 0 0 0 2px rgba(13,110,253,.6);
  border-radius: .5rem;
}

/* Softer grid lines */
.fc-theme-standard .fc-scrollgrid,
.fc-theme-standard td,
.fc-theme-standard th {
  border-color: var(--pm-border);
}

/* Light Sunday tint */
.fc .fc-day-sun {
  background-image: linear-gradient(to bottom, rgba(148,163,184,.06), rgba(148,163,184,.06));
}

/* Holiday accent */
.fc .fc-daygrid-day.pm-holiday,
.fc .fc-daygrid-day-frame.pm-holiday,
.fc .fc-col-header-cell.pm-holiday,
.fc .fc-list-day.pm-holiday {
  background-image: linear-gradient(135deg, rgba(248,113,113,.16), rgba(254,226,226,.18));
  box-shadow: inset 3px 0 0 rgba(248,113,113,.3);
}
.fc .fc-timegrid-col.pm-holiday .fc-timegrid-col-frame,
.fc .fc-timegrid-col-frame.pm-holiday {
  background-image: linear-gradient(180deg, rgba(248,113,113,.12), rgba(254,226,226,.08));
  box-shadow: inset 3px 0 0 rgba(248,113,113,.28);
}
.fc .fc-daygrid-day.pm-holiday .fc-daygrid-day-number,
.fc .pm-holiday .fc-daygrid-day-number {
  background-color: rgba(254,226,226,.85);
  border-radius: .5rem;
  color: var(--pm-danger-strong);
  box-shadow: inset 0 0 0 2px rgba(248,113,113,.55);
}
@media (prefers-contrast: more) {
  .fc .pm-holiday .fc-daygrid-day-number {
    background-color: var(--pm-danger-soft-bg);
    color: var(--pm-danger-strong);
    box-shadow: inset 0 0 0 3px var(--pm-danger);
    text-shadow: 0 1px 0 rgba(255,255,255,.45);
  }
}
.fc .fc-col-header-cell.pm-holiday .fc-col-header-cell-cushion,
.fc .fc-col-header-cell-cushion.pm-holiday,
.fc .fc-list-day.pm-holiday .fc-list-day-cushion,
.fc .fc-list-day-cushion.pm-holiday {
  color: var(--pm-danger-strong);
  font-weight: 600;
}
.pm-holiday-badge {
  display: inline-flex;
  align-items: center;
  padding: .15rem .45rem;
  margin-left: .5rem;
  border-radius: 999px;
  background-color: rgba(254,226,226,.7);
  color: var(--pm-danger-strong);
  font-size: var(--pm-font-size-xxs, .75rem);
  font-weight: 600;
}
.fc .fc-daygrid-day-top {
  display: flex;
  align-items: center;
  gap: .35rem;
}
.fc .fc-daygrid-day-top .fc-daygrid-day-number {
  padding-right: 0;
}
.fc .fc-daygrid-day-top .pm-holiday-badge {
  margin-left: 0;
}
.fc .fc-timegrid-col-top .pm-holiday-badge {
  margin-left: .35rem;
}

/* Ensure text inherits our dark color everywhere */
.fc .fc-event,
.fc .fc-event-main,
.fc .fc-event-title,
.fc .fc-event-time,
.fc .fc-list-event-title,
.fc .fc-list-event-time,
.fc .fc-event a {
  color: var(--pm-fg, var(--pm-text-contrast)) !important;
  text-decoration: none;
}

/* Active view button */
[data-view].active { color: var(--pm-card); }

/* Shared event styling */
.fc .fc-event {
  border: 1px solid transparent;
  border-left-width: 4px;
  border-radius: .5rem;
  padding: .125rem .4rem;
}

/* VISIT — sky */
.fc-event.pm-cat-visit {
  --pm-bg: var(--pm-info-soft-bg);
  --pm-fg: var(--pm-info-soft-text);
  --pm-br: var(--pm-info);
  background: var(--pm-bg);
  border-color: var(--pm-br);
}

/* INSP — amber */
.fc-event.pm-cat-insp {
  --pm-bg: var(--pm-warning-soft-bg);
  --pm-fg: var(--pm-warning-strong);
  --pm-br: var(--pm-warning);
  background: var(--pm-bg);
  border-color: var(--pm-br);
}

/* CONFERENCE — violet */
.fc-event.pm-cat-conference {
  --pm-bg: var(--pm-surface-lilac);
  --pm-fg: var(--pm-accent-ffc);
  --pm-br: var(--pm-accent-purple);
  background: var(--pm-bg);
  border-color: var(--pm-br);
}

/* BIRTHDAY — pink */
.fc-event.pm-cat-birthday {
  --pm-bg: var(--pm-accent-pink-soft);
  --pm-fg: var(--pm-accent-pink);
  --pm-br: var(--pm-accent-pink);
  background: var(--pm-bg);
  border-color: var(--pm-br);
}

/* ANNIVERSARY — teal */
.fc-event.pm-cat-anniversary {
  --pm-bg: var(--pm-accent-teal-soft);
  --pm-fg: var(--pm-accent-teal);
  --pm-br: var(--pm-accent-teal);
  background: var(--pm-bg);
  border-color: var(--pm-br);
}

/* CELEBRATION (fallback) */
.fc-event.pm-cat-celebration {
  --pm-bg: var(--pm-accent-pink-soft);
  --pm-fg: var(--pm-accent-pink);
  --pm-br: var(--pm-accent-pink-soft);
  background: var(--pm-bg);
  border-color: var(--pm-br);
}

/* OTHER — slate */
.fc-event.pm-cat-other {
  --pm-bg: var(--pm-surface-contrast);
  --pm-fg: var(--pm-text-contrast);
  --pm-br: var(--pm-accent-slate);
  background: var(--pm-bg);
  border-color: var(--pm-br);
}

/* Improve contrast inside List view rows */
.fc-list-event-title, .fc-list-event-time, .fc-list-event-graphic {
  color: inherit;
}

/* Improve readability in tight spaces */
.fc .fc-daygrid-event .fc-event-time { font-weight: 600; }
.fc .fc-event-title { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

/* Focus/hover cue */
.fc .fc-event:hover, .fc .fc-event:focus {
  box-shadow: 0 0 0 2px var(--pm-br, var(--pm-accent-slate));
  outline: none;
}

/* Tiny color dots inside filter pills */
#categoryFilters .btn[data-cat="Visit"]::before      { content:"• "; color:var(--pm-info); }
#categoryFilters .btn[data-cat="Insp"]::before       { content:"• "; color:var(--pm-warning); }
#categoryFilters .btn[data-cat="Conference"]::before { content:"• "; color:var(--pm-accent-purple); }
#categoryFilters .btn[data-cat="Birthday"]::before   { content:"• "; color:var(--pm-accent-pink); }
#categoryFilters .btn[data-cat="Anniversary"]::before{ content:"• "; color:var(--pm-accent-teal); }
#categoryFilters .btn[data-cat="Other"]::before      { content:"• "; color:var(--pm-accent-slate); }
#categoryFilters .btn[data-cat="Holiday"]::before    { content:"• "; color:var(--pm-danger-emphasis); }

/* Legend dots */
.legend-dot {
  display:inline-block;
  width:.75rem;
  height:.75rem;
  border-radius:50%;
  margin-right:.25rem;
}
.legend-dot.pm-cat-visit      { background:var(--pm-info); }
.legend-dot.pm-cat-insp       { background:var(--pm-warning); }
.legend-dot.pm-cat-conference { background:var(--pm-accent-purple); }
.legend-dot.pm-cat-birthday   { background:var(--pm-accent-pink); }
.legend-dot.pm-cat-anniversary{ background:var(--pm-accent-teal); }
.legend-dot.pm-cat-celebration{ background:var(--pm-accent-pink-soft); }
.legend-dot.pm-cat-other      { background:var(--pm-accent-slate); }
.legend-dot.pm-cat-holiday,
.legend-dot.pm-holiday        { background:var(--pm-danger-emphasis); box-shadow:0 0 0 2px rgba(248,113,113,.35); }

.fc-event.pm-recurring::after {
  content: "\21BB";
  font-size: var(--pm-font-size-xxs);
  opacity: .7;
  margin-left: .35rem;
}

/* Print: clean A4 month view */
@media print {
  nav, header, footer, #categoryFilters, #btnNewEvent, #btnPrev, #btnNext, [data-view], #btnToday { display: none !important; }
  #calendar { box-shadow: none; border: none; }
  .fc .fc-toolbar { display: none; }
  .fc .pm-holiday .fc-daygrid-day-number {
    background: transparent !important;
    box-shadow: inset 0 0 0 1px var(--pm-danger);
    color: var(--pm-text-contrast);
  }
}
