/* ───────────────────────────────
   DOCUMENT REPOSITORY – LETTER CARDS
   drop-in replacement for docrepo-ui.css
   ─────────────────────────────── */

/* base card – letter look */
.doc-card {
    position: relative;
    background: var(--pm-card);
    border: 1px solid rgba(15, 23, 42, 0.015);
    border-radius: 18px;
    box-shadow: 0 16px 38px rgba(15, 23, 42, 0.03);
    min-height: 150px;
    display: flex;
    flex-direction: column;
    overflow: visible; /* we want dropdowns to escape */
    /* do NOT use isolation:isolate here, it traps dropdowns */
    transition: transform .15s ease, box-shadow .15s ease;
}

    /* pale binder strip on the left */
    .doc-card::before {
        content: "";
        position: absolute;
        inset: 0 auto 0 0;
        width: 54px;
        background: linear-gradient(180deg, var(--pm-accent-blue-muted) 0%, var(--pm-accent-blue-soft-2) 100%);
        border-right: 1px solid rgba(79, 70, 229, 0.05);
        z-index: 1;
    }

    /* punch holes */
    .doc-card::after {
        content: "";
        position: absolute;
        left: 16px;
        top: 24px;
        width: 10px;
        height: 64px;
        background: radial-gradient(circle, rgba(15,23,42,0.06) 0, rgba(15,23,42,0.06) 38%, transparent 40%) 0 0/10px 22px repeat-y;
        filter: drop-shadow(0 1px 1px rgba(15,23,42,0.05));
        z-index: 2;
    }

    /* folded corner variant */
    .doc-card.doc-corner > .doc-card__header::after {
        content: "";
        position: absolute;
        top: 0;
        right: 0;
        width: 48px;
        height: 48px;
        background: linear-gradient(135deg, var(--pm-card) 0%, var(--pm-accent-blue-soft-2) 85%);
        clip-path: polygon(0 0, 100% 0, 100% 100%);
        opacity: .4;
        pointer-events: none;
        z-index: 5;
    }

    /* hover */
.doc-card:hover {
    transform: translateY(-1px);
    box-shadow: 0 18px 40px rgba(15, 23, 42, 0.045);
}

/* SECTION: Card navigation states */
.docrepo-card:not(.docrepo-card--inactive) {
    cursor: pointer;
}

.docrepo-card--inactive .docrepo-subject-link {
    color: var(--pm-text-muted);
}

/* ── header band ───────────────── */
.doc-card__header {
    position: relative;
    display: flex;
    justify-content: space-between;
    gap: .5rem;
    padding: .5rem 1.05rem .3rem 68px; /* match strip width */
    background: radial-gradient(circle at top, var(--pm-surface-contrast) 0%, var(--pm-card) 60%);
    border-bottom: 1px solid rgba(15, 23, 42, 0.015);
    min-height: 40px;
    z-index: 4;
}

.doc-card__path {
    font-size: .67rem;
    color: var(--pm-text-muted);
    line-height: 1.05rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.doc-card__crumb + .doc-card__crumb {
    margin-left: .35rem;
}

/* OCR stamp */
.doc-card__stamp {
    align-self: flex-start;
    font-size: .6rem;
    text-transform: uppercase;
    font-weight: 600;
    padding: .22rem .55rem .26rem;
    border-radius: 9999px;
    background: rgba(226, 232, 240, .85);
    border: 1px solid rgba(148, 163, 184, .38);
    white-space: nowrap;
}

.doc-card__stamp--ok {
    background: rgba(22, 163, 74, 0.11);
    border-color: rgba(22, 163, 74, 0.28);
    color: var(--pm-success-strong);
}

.doc-card__stamp--fail {
    background: rgba(248, 113, 113, 0.09);
    border-color: rgba(248, 113, 113, 0.28);
    color: var(--pm-danger);
}

.doc-card__stamp--pending {
    background: rgba(252, 211, 77, 0.10);
    border-color: rgba(252, 211, 77, 0.28);
    color: var(--pm-warning-muted);
}

/* ── body ───────────────── */
.doc-card__body {
    padding: .55rem 1.05rem .4rem 68px;
    z-index: 4;
}

.doc-card__title {
    font-size: .88rem;
    font-weight: 600;
    margin-bottom: .15rem;
    line-height: 1.12rem;
}

/* clamp title to 2 lines */
.text-truncate-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

/* tags inside card */
.doc-card__tags {
    display: flex;
    gap: .25rem;
    flex-wrap: wrap;
}

.doc-tag {
    background: var(--pm-surface-contrast);
    border: 1px solid rgba(148,163,184,.35);
    color: var(--pm-text-contrast);
    font-size: .6rem;
    border-radius: 9999px;
    padding: .05rem .45rem .12rem;
}

/* ── footer / actions ───────────────── */
.doc-card__actions {
    margin-top: auto;
    padding: .5rem 1.05rem .6rem 68px;
    background: linear-gradient(180deg, rgba(248, 250, 252, 0.25) 0%, rgba(248, 250, 252, 0.95) 100%);
    display: flex;
    gap: .5rem;
    align-items: center;
    border-top: 1px solid rgba(15, 23, 42, 0.015);
    z-index: 10; /* above decorative strips */
    overflow: visible;
    position: relative;
}

    .doc-card__actions .btn {
        border-radius: 12px;
    }

.doc-card__more {
    border-radius: 9999px;
}

/* ── dropdown fix ─────────────────
   We must make sure the dropdown is above the card & not clipped
*/
.doc-card .dropdown {
    position: relative;
    z-index: 20;
}

.doc-card .dropdown-menu {
    z-index: 9999;
    margin-top: .4rem;
}

/* ───────────────────────────────
   SEARCH BAR (shared)
   ─────────────────────────────── */
.docrepo-search-shell {
    display: flex;
    justify-content: center;
    margin-bottom: 1.5rem;
}

.docrepo-searchbar {
    width: min(1080px, 100%);
    background: var(--pm-card);
    border-radius: 9999px;
    box-shadow: 0 12px 30px rgba(15, 23, 42, 0.04);
    padding: 0.35rem 0.6rem 0.35rem 1rem;
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.docrepo-search-input {
    display: flex;
    align-items: center;
    gap: 0.6rem;
    flex: 1 1 auto;
}

    .docrepo-search-input i {
        color: var(--pm-text-muted);
        font-size: 1rem;
    }

    .docrepo-search-input input {
        border: none;
        outline: none;
        flex: 1 1 auto;
        font-size: 0.96rem;
        background: transparent;
    }

        .docrepo-search-input input::placeholder {
            color: var(--pm-accent-slate);
        }

.docrepo-search-actions {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.docrepo-searchbar:focus-within {
    box-shadow: 0 16px 40px rgba(15, 23, 42, 0.08);
}

/* SECTION: Toolbar layout */
.docrepo-main__toolbar {
    display: flex;
    gap: 0.75rem;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 0.75rem;
}

/* SECTION: Toolbar search bar */
.docrepo-searchbar--toolbar {
    width: auto;
    margin: 0;
    flex: 1 1 auto;
    box-shadow: none;
}

.docrepo-searchbar__input {
    display: flex;
    align-items: center;
    gap: 0.6rem;
    flex: 1 1 auto;
}

.docrepo-searchbar__input i {
    color: var(--pm-text-muted);
    font-size: 1rem;
}

.docrepo-searchbar__input input {
    border: none;
    outline: none;
    flex: 1 1 auto;
    font-size: 0.96rem;
    background: transparent;
}

.docrepo-searchbar__actions {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

/* ───────────────────────────────
   LAYOUT: FILTER SHELL + CONTENT
   ─────────────────────────────── */
.docrepo-shell {
    display: flex;
    gap: 1rem;
    align-items: flex-start;
}

.docrepo-filters {
    width: 300px;
    flex: 0 0 300px;
    background: var(--pm-card);
    border: 1px solid rgba(15, 23, 42, 0.08);
    border-radius: 0.85rem;
    padding: 0.9rem;
    position: sticky;
    top: 1rem;
    max-height: none;
    overflow: visible;
}

.docrepo-filters__header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.5rem;
    margin-bottom: 0.6rem;
}

.docrepo-filters__title {
    font-weight: 600;
    color: rgba(15, 23, 42, 0.7);
}

.docrepo-filters__toggle {
    border-radius: 0.65rem;
}

.docrepo-filters__collapsedHint {
    display: none;
    justify-content: center;
    padding-top: 0.5rem;
}

.docrepo-filters--collapsed {
    width: 52px;
    flex: 0 0 52px;
    padding: 0.6rem;
    overflow: hidden;
}

.docrepo-filters--collapsed .docrepo-facets {
    display: none;
}

.docrepo-filters--collapsed .docrepo-filters__title {
    display: none;
}

.docrepo-filters--collapsed .docrepo-filters__collapsedHint {
    display: flex;
}

.docrepo-facets {
    display: flex;
    flex-direction: column;
    gap: 0.9rem;
}

.docrepo-facet {
    display: flex;
    flex-direction: column;
    gap: 0.45rem;
}

.docrepo-facet__title {
    font-size: 0.72rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.04em;
    color: var(--pm-text-muted);
}

.docrepo-facet__list {
    display: flex;
    flex-direction: column;
    gap: 0.4rem;
    padding: 0.5rem;
    border-radius: 0.65rem;
    border: 1px solid rgba(15, 23, 42, 0.06);
    background: rgba(15, 23, 42, 0.02);
}

.docrepo-facet__sub {
    margin-top: 0.35rem;
}

.docrepo-facet__actions {
    margin-top: 0.4rem;
    padding-top: 0.6rem;
    border-top: 1px solid rgba(15, 23, 42, 0.06);
    display: flex;
    flex-direction: column;
    gap: 0.45rem;
}

.docrepo-check {
    display: flex;
    align-items: center;
    gap: 0.45rem;
    cursor: pointer;
    user-select: none;
}

.docrepo-check__input {
    width: 16px;
    height: 16px;
}

.docrepo-check__label {
    font-size: 0.85rem;
    color: rgba(15, 23, 42, 0.82);
}

.docrepo-inline-check {
    margin: 0;
}

.docrepo-main {
    flex: 1 1 auto;
    min-width: 0;
}

.docrepo-view-toggle .btn {
    display: inline-flex;
    align-items: center;
    gap: 0.35rem;
}

.docrepo-chipbar {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    align-items: center;
    margin-bottom: 1rem;
}

.docrepo-chip {
    display: inline-flex;
    align-items: center;
    gap: 0.35rem;
}

.docrepo-chip__clear {
    padding: 0.25rem 0.45rem;
}

.docrepo-chip__clear-all {
    font-weight: 600;
}

/* ───────────────────────────────
   LIST VIEW TABLE
   ─────────────────────────────── */
.docrepo-list-wrapper {
    border-radius: 0.75rem;
    border: 1px solid rgba(15, 23, 42, 0.08);
    background: var(--pm-card);
    overflow-x: auto;
    overflow-y: visible;
    max-height: none;
}

.docrepo-list {
    margin-bottom: 0;
}

.docrepo-list thead th {
    font-size: 0.72rem;
    text-transform: uppercase;
    letter-spacing: 0.02em;
    color: var(--pm-text-muted);
    border-bottom: 1px solid rgba(15, 23, 42, 0.08);
    padding: 0.45rem 0.6rem;
}

.docrepo-list tbody td {
    padding: 0.45rem 0.6rem;
    vertical-align: middle;
}

/* SECTION: Row density + hover */
.docrepo-row {
    transition: background-color 0.15s ease;
}

.docrepo-row:not(.docrepo-row--inactive) {
    cursor: pointer;
}

.docrepo-row:not(.docrepo-row--inactive):hover {
    background: rgba(15, 23, 42, 0.04);
}

.docrepo-row:focus-visible {
    outline: 2px solid rgba(13, 110, 253, 0.4);
    outline-offset: -2px;
}

.docrepo-row--inactive {
    color: var(--pm-text-muted);
    background: rgba(148, 163, 184, 0.06);
}

.docrepo-subject-link {
    font-weight: 600;
    color: var(--pm-text-contrast);
    text-decoration: none;
    line-height: 1.2;
}

.docrepo-subject-link:hover {
    text-decoration: underline;
}

.docrepo-ocr {
    display: inline-flex;
    align-items: center;
    gap: 0.35rem;
    font-size: 0.75rem;
    font-weight: 600;
}

.docrepo-ocr--ok {
    color: var(--pm-success-strong);
}

.docrepo-ocr--fail {
    color: var(--pm-danger);
}

.docrepo-ocr--pending {
    color: var(--pm-warning-muted);
}

.docrepo-ocr--none {
    color: var(--pm-text-muted);
}

.docrepo-actions {
    display: flex;
    justify-content: flex-end;
    gap: 0.35rem;
    flex-wrap: wrap;
}

.docrepo-actions__dropdown {
    position: relative;
}

.docrepo-actions__dropdown .btn {
    padding: 0.25rem 0.45rem;
}

/* ───────────────────────────────
   RESPONSIVE
   ─────────────────────────────── */
@media (max-width: 992px) {
    .docrepo-shell {
        flex-direction: column;
    }

    .docrepo-filters {
        width: 100%;
        flex: 1 1 auto;
        position: static;
        max-height: none;
    }

    .docrepo-filters--collapsed {
        width: 100%;
        flex: 1 1 auto;
    }

    .docrepo-main__toolbar {
        flex-direction: column;
        align-items: stretch;
    }
}

@media (max-width: 768px) {
    .doc-card::before {
        width: 48px;
    }

    .doc-card__header,
    .doc-card__body,
    .doc-card__actions {
        padding-left: 58px;
    }

    .doc-card__path {
        max-width: 60%;
    }

    .docrepo-searchbar {
        flex-wrap: wrap;
        border-radius: 1.25rem;
    }

    .docrepo-search-actions {
        width: 100%;
        justify-content: flex-end;
    }

    .docrepo-toolbar {
        justify-content: flex-start;
        gap: 0.5rem;
    }

    .docrepo-actions {
        justify-content: flex-start;
    }
}
/* lift the card above its siblings while interacting */
.doc-card {
    position: relative;
}

    .doc-card:hover,
    .doc-card:focus-within {
        z-index: 50; /* higher than other cards */
    }

    /* keep dropdown above card visuals */
    .doc-card .dropdown-menu {
        z-index: 2000;
    }

/* SECTION: Active filters summary */
.docrepo-activefilters {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    padding: 10px 12px;
    margin: 10px 0;
    border: 1px solid rgba(0, 0, 0, 0.06);
    border-radius: 10px;
    background: rgba(0, 0, 0, 0.015);
}

.docrepo-activefilters__label {
    font-size: 13px;
    color: rgba(0, 0, 0, 0.7);
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
}

.docrepo-activefilters__clear {
    font-size: 13px;
    text-decoration: none;
}

.docrepo-activefilters__clear:hover {
    text-decoration: underline;
}

/* SECTION: Disabled apply button */
#docrepoApplyBtn:disabled {
    opacity: 0.65;
    cursor: not-allowed;
}
